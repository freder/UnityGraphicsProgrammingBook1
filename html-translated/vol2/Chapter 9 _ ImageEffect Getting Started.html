<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ops="http://www.idpf.org/2007/ops" xml:lang="en" class="translated-ltr" style="height: 100%;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <link rel="stylesheet" type="text/css" href="./Chapter 9 _ ImageEffect Getting Started_files/style.scss">
  <meta name="generator" content="Re:VIEW">
  <title>Getting started with ImageEffect</title>

			<style>
				img {
					max-width: 80vw;
					max-height: 80vh;
				}
			</style><style>
					.goog-te-banner-frame {
						display: none;
					}
				</style>
			<script>(function(){(function injection() {
  var pageLang = 'ja';
  var userLang = 'en';

  var uid = '1E07F158C6FA4460B352973E9693B329';
  var teId = 'TE_' + uid;
  var cbId = 'TECB_' + uid;

  function show() {
    window.setTimeout(function() {
      window[teId].showBanner(true);
    }, 10);
  }

  function newElem() {
    
  }

  if (window[teId]) {
    show();
  } else {
    if (!window.google || !google.translate ||
        !google.translate.TranslateElement) {
      if (!window[cbId]) {
        window[cbId] = function() {
          window[teId] = newElem();
          show();
        };
      }
      
    }
  }
})();})();</script><script src="https://translate.google.com/translate_a/element.js?cb=TECB_1E07F158C6FA4460B352973E9693B329&amp;client=tee&amp;hl=en"></script><script src="./Chapter 9 _ ImageEffect Getting Started_files/f.txt"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="https://translate.googleapis.com/translate_static/css/translateelement.css"><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/translate_static/js/element/main.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./Chapter 9 _ ImageEffect Getting Started_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="./Chapter 9 _ ImageEffect Getting Started_files/main.js"></script><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/element/TE_20201130_00/e/js/element/element_main.js"></script><script type="text/javascript" charset="UTF-8" src="./Chapter 9 _ ImageEffect Getting Started_files/element_main.js"></script><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/element/TE_20201130_00/e/js/element/element_main.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="https://translate.googleapis.com/translate_static/css/translateelement.css"><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/translate_static/js/element/main.js"></script><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/element/TE_20201130_00/e/js/element/element_main.js"></script></head>
		
<body style="position: relative; min-height: 100%; top: 40px;"><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:''" style="visibility:visible"></iframe></div><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:''" style="visibility:visible"></iframe></div><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:''" style="visibility:visible"></iframe></div>
<h1><a id="h9"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chapter 9　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageEffect Getting Started</font></font></h1>
<div id="id_SimpleImageEffect_2F02mono" class="image">
<img src="./Chapter 9 _ ImageEffect Getting Started_files/02mono.png" alt="Negative / positive inversion by ImageEffect">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 9.1: Negative-Positive Inversion with ImageEffect
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A simple explanation of how to implement ImageEffect, a technology that applies effects to the output video using a shader (GPU), in Unity. </font><font style="vertical-align: inherit;">The technology is also known as PostEffect.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageEffect is used for glow effects that express light, anti-aliasing that reduces jaggies, depth of field DOF, and much more. </font><font style="vertical-align: inherit;">The simplest example would be a color change or modification that also deals with the sample presented here.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This chapter is written on the assumption that you have some prerequisite knowledge about the basic knowledge and usage of Unlit shader and Surface shader, but since it is the shader with the simplest configuration, even if you do not have the prerequisite knowledge, I think you can read on and use it.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The sample in this chapter is </font><font style="vertical-align: inherit;">"Simple Image Effect" from </font></font><br><a href="https://github.com/IndieVisualLab/UnityGraphicsProgramming2" class="link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/IndieVisualLab/UnityGraphicsProgramming2</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2><a id="h9-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> How ImageEffect works</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The way ImageEffect achieves various effects is, in a nutshell, image processing, that is, by manipulating the screen pixel by pixel, various effects are achieved.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speaking of processing pixels by shaders, it is a fragment shader. </font><font style="vertical-align: inherit;">In essence, implementing an ImageEffect is equivalent to implementing a fragment shader.</font></font></p>
<div id="id_SimpleImageEffect_2F01" class="image">
<img src="./Chapter 9 _ ImageEffect Getting Started_files/01.png" alt="ImageEffect implementation is fragment shader implementation">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 9.2: ImageEffect implementation implements fragment shader
</font></font></p>
</div>

<h2><a id="h9-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Simple flow of ImageEffect in Unity</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Unity, the processing order of ImageEffect is roughly as follows.</font></font></p>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The camera draws the scene.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The drawing contents of the camera are input to the OnRenderImage method.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the shader for ImageEffect, modify the input drawing contents.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The OnRenderImage method outputs the modified drawing content.</font></font></li>
</ol>

<h2><a id="h9-3"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Check the configuration from the sample scene</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have prepared the simplest sample scene. </font><font style="vertical-align: inherit;">Open the sample "ImageEffectBase" scene to see it. </font><font style="vertical-align: inherit;">The associated script and other resources have the same name.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A similar sample has a resource with the same name as the ImageEffect scene, but be aware that it will be discussed later.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When you open the sample, the image projected by the camera in the scene will be negatively and positively inverted by ImageEffect. </font><font style="vertical-align: inherit;">This is equivalent to the shader for ImageEffect that Unity generates by default, but the actual source code is slightly different.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make sure the "ImageEffectBase" script is attached to the "Main Camera" in the sample scene. </font><font style="vertical-align: inherit;">In addition, "ImageEffectBase" references a material with the same name, and that material has a shader with the same name.</font></font></p>

<h2><a id="h9-4"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Script implementation</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First of all, I will explain the process from calling the Shader of ImageEffect from the script.</font></font></p>

<h3><a id="h9-4-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1　</font></font></font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OnRenderImage method</font></font></font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When you want to make changes to the video that Unity outputs, you almost always need to implement the OnRenderImage method. </font><font style="vertical-align: inherit;">OnRenderImage is a method defined in Unity's standard workflow, like Start and Update.</font></font></p>
<div class="emlist-code">
<p class="caption">ImageEffectBase.cs</p>
<pre class="emlist">[ExecuteInEditMode]<font></font>
[RequireComponent(typeof(Camera))]<font></font>
public class ImageEffectBase : MonoBehaviour<font></font>
{<font></font>
…<font></font>
protected virtual void OnRenderImage<font></font>
    (RenderTexture source, RenderTexture destination)<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font>
    Graphics.Blit(source, destination, this.material);<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnRenderImage is only called when it is added to a GameObject that has a Camera component. </font><font style="vertical-align: inherit;">Therefore, the ImageEffect class </font></font><code class="inline-code tt">[RequireComponent(typeof(Camera))]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defines.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><code class="inline-code tt">ExcludeInEditMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attributes are also defined </font><font style="vertical-align: inherit;">because the result of applying ImageEffect should be visible before running Scene </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Disable the ImageEffect script when you want to switch between multiple ImageEffects and check when they are disabled.</font></font></p>

<h4><a id="h9-4-1-1"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About the arguments source and destination</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnRenderImage is given an input in the first argument (source) and an output destination in the second (destination). </font><font style="vertical-align: inherit;">Both are of type RenderTexture, but unless otherwise specified, source is given the drawing result of the camera and destination is given null.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageEffect modifies the picture entered in source and writes it to destination, but when destination is null, the modified picture is output to the framebuffer, the area visible to the display.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also, when RenderTexture is set to the output destination of the Camera, the source is equivalent to that RenderTexture.</font></font></p>

<h4><a id="h9-4-1-2"></a>Graphics.Blit</h4>
<p><code class="inline-code tt">Graphics.Blit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The method is the process of drawing the input RenderTexture to the output RenderTexture using the specified material and shader. </font><font style="vertical-align: inherit;">The inputs and outputs here are the source and destination of the OnRenderImage. </font><font style="vertical-align: inherit;">Also, the material will be the one with the shader set for ImageEffect.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a general rule, the OnRenderImage method must always pass some image data to the destination argument. </font><font style="vertical-align: inherit;">Therefore, in most cases Graphics.Blit is called within OnRenderImage.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It </font></font><code class="inline-code tt">Graphics.Blit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">may </font><font style="vertical-align: inherit;">also </font><font style="vertical-align: inherit;">be used </font><font style="vertical-align: inherit;">as an application, for example, when creating a texture for use in another effect, or when duplicating a texture </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alternatively, you may use another method to pass the data to the destination, but I'll omit those application examples here for the sake of getting started.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The following items are a little different from the process of applying ImageEffect, so if you are reading for the first time, it is recommended that you skip to the shader description.</font></font></p>

<h3><a id="h9-4-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verify if ImageEffect is available</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I don't think it is necessary to implement or explain this item when explaining ImageEffect, but I decided to explain it so that it would not be an obstacle when reading materials with more practical implementations. </font><font style="vertical-align: inherit;">Equivalent functionality is implemented in the ImageEffect documentation provided by Unity.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageEffect is a process that is calculated for each pixel. </font><font style="vertical-align: inherit;">Therefore, in an execution environment without an advanced GPU, ImageEffect may not be welcomed due to the large number of operations. </font><font style="vertical-align: inherit;">Therefore, it is helpful to verify at the start whether ImageEffect is available in the execution environment and disable it if it is not available.</font></font></p>
<div class="emlist-code">
<p class="caption">ImageEffectBase.cs</p>
<pre class="emlist">protected virtual void Start()<font></font>
{<font></font>
    if (!SystemInfo.supportsImageEffects<font></font>
     || !this.material<font></font>
     || !this.material.shader.isSupported)<font></font>
    {<font></font>
        base.enabled = false;<font></font>
    }<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verification </font></font><code class="inline-code tt">SystemInfo.supportsImageEffects</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be easily achieved by </font><font style="vertical-align: inherit;">providing Unity </font><font style="vertical-align: inherit;">.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This implementation will be useful in most cases, but you may need a different implementation, for example when using the fallback feature implemented on the shader side. </font><font style="vertical-align: inherit;">Please refer to it to the last.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The only </font></font><code class="inline-code tt">this.material</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thing </font><font style="vertical-align: inherit;">you need to be aware of is when </font><font style="vertical-align: inherit;">to validate the reference. </font><font style="vertical-align: inherit;">The example validates with the Start method, but when this is Awake or OnEnable </font></font><code class="inline-code tt">this.material</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Unity will show null (and </font></font><code class="inline-code tt">base.enabled = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will invalidate the script) </font><font style="vertical-align: inherit;">, even if a reference is given to </font><font style="vertical-align: inherit;">, for example </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Details are omitted, but </font></font><code class="inline-code tt">ExcludeInEditMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it depends on the specifications (it is hard to say that it is harmful).</font></font></p>

<h2><a id="h9-5"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.5　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Simplest ImageEffect Shader Implementation</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, I will explain about the ImageEffect shader. </font><font style="vertical-align: inherit;">The most basic sample presented here implements the effect of just flipping the output colors, similar to what Unity creates as standard.</font></font></p>
<div class="emlist-code">
<p class="caption">ImageEffectBase.shader</p>
<pre class="emlist">Shader "ImageEffectBase"<font></font>
{<font></font>
    Properties<font></font>
    {<font></font>
        _MainTex("Texture", 2D) = "white" {}<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font></font></font><font></font>
    SubShader<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    {</font></font></font></font><font></font>
        Cull Off ZWrite Off ZTest Always<font></font>
<font></font>
        Pass<font></font>
        {<font></font>
            CGPROGRAM<font></font>
<font></font>
            #include "UnityCG.cginc"<font></font>
            #pragma vertex vert_img<font></font>
            #pragma fragment frag<font></font>
<font></font>
            sampler2D _MainTex;<font></font>
<font></font>
            fixed4 frag(v2f_img input) : SV_Target<font></font>
            {<font></font>
                float4 color = tex2D(_MainTex, input.uv);<font></font>
                color.rgb = 1 - color.rgb;<font></font>
<font></font>
                return color;<font></font>
            }<font></font>
<font></font>
            ENDCG<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a rough process flow, </font></font><code class="inline-code tt">_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the image drawn by the camera is input to, and the fragment shader determines the final color to be displayed on the pixel.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here </font></font><code class="inline-code tt">_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texture information given to </font></font><code class="inline-code tt">OnRenderImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the </font></font><code class="inline-code tt">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">Graphics.Blit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the </font></font><code class="inline-code tt">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is equal to.</font></font></p>
<p><code class="inline-code tt">_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tooth </font></font><code class="inline-code tt">Graphics.Blit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Please note that has been reserved by the Unity for input. </font><font style="vertical-align: inherit;">If you change to a different other name, </font></font><code class="inline-code tt">Graphics.Blit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the </font></font><code class="inline-code tt">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is not entered correctly shader.</font></font></p>

<h3><a id="h9-5-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.5.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Differences from the standard shaders generated by Unity</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The ImageEffect that Unity generates by default is a bit long and complex (excerpt): </font><font style="vertical-align: inherit;">ImageEffect is also a shader, so you get the final output through a standard rendering pipeline. </font><font style="vertical-align: inherit;">Therefore, a vertex shader that does not seem to affect the effect that ImageEffect achieves must also be defined in the ImageEffect shader.</font></font></p>
<div class="emlist-code">
<p class="caption">NewImageEffectShader.shader</p>
<pre class="emlist">SubShader<font></font>
{<font></font>
    Cull Off ZWrite Off ZTest Always<font></font>
<font></font>
    Pass<font></font>
    {<font></font>
        CGPROGRAM<font></font>
        #pragma vertex vert<font></font>
        #pragma fragment frag<font></font>
<font></font>
        #include "UnityCG.cginc"<font></font>
<font></font>
        struct appdata<font></font>
        {<font></font>
            float4 vertex : POSITION;<font></font>
            float2 uv : TEXCOORD0;<font></font>
        };<font></font>
<font></font>
        struct v2f<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        {</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            float2 uv : TEXCOORD0;</font></font></font></font><font></font>
            float4 vertex : SV_POSITION;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        };</font></font></font></font><font></font>
<font></font>
        v2f vert (appdata v)<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        {</font></font></font></font><font></font>
            v2f o;<font></font>
            o.vertex = UnityObjectToClipPos(v.vertex);<font></font>
            o.uv = v.uv;<font></font>
            return o;<font></font>
        }<font></font>
<font></font>
        sampler2D _MainTex;<font></font>
<font></font>
        fixed4 frag (v2f i) : SV_Target<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        {</font></font></font></font><font></font>
            fixed4 col = tex2D(_MainTex, i.uv);<font></font>
            col.rgb = 1 - col.rgb;<font></font>
            return col;<font></font>
        }<font></font>
        ENDCG<font></font>
    }<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The vertex shader in ImageEffect simply faces the camera and passes a rectangular mesh that fills the entire surface and its UV coordinates to the fragment shader. </font><font style="vertical-align: inherit;">There are some benefits that can be achieved by modifying this vertex shader, but most ImageEffects do not.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That's why Unity provides a standard vertex shader and a structure to define its inputs. </font><font style="vertical-align: inherit;">They are defined in "UnityCG.cginc". </font><font style="vertical-align: inherit;">Here, in the source code of the shader is not a prepared standard, defined in the UnityCg.cginc </font></font><code class="inline-code tt">vertex vert_img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya </font></font><code class="inline-code tt">appdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">v2f_img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">by making use of, and to simplify the entire source code.</font></font></p>

<h3><a id="h9-5-2"></a><span class="secno">9.5.2　</span>Cull, ZWrite, ZTest</h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At first glance, standard values ​​seem to be fine for culling, writing and referencing the Z-buffer. </font><font style="vertical-align: inherit;">However, Unity </font></font><code class="inline-code tt">Cull Off ZWrite Off ZTest Always</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recommends defining to </font><font style="vertical-align: inherit;">prevent inadvertent writing to the Z-buffer </font><font style="vertical-align: inherit;">.</font></font></p>

<h2><a id="h9-6"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.6　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The easiest practice</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's practice ImageEffect easily. </font><font style="vertical-align: inherit;">The sample simply flips the full screen negatively and positively, but try applying negative and positive flipping "only to the diagonal half" of the entire image, as shown in the figure at the beginning of this chapter.</font></font></p>
<p><code class="inline-code tt">input.uv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is given coordinates that indicate one pixel of the entire image, so take advantage of this. </font><font style="vertical-align: inherit;">Each pixel in the entire image is represented by the x * y coordinates normalized by 0 to 1.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An example code that works is included in the sample "Prtactice" folder and will be explained later, but if you are new to it, try implementing it yourself first. I recommend that.</font></font></p>

<h3><a id="h9-6-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.6.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Easy up, down, left and right halves</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It's very easy to change the color in the upper and lower halves. </font><font style="vertical-align: inherit;">This is a good way to see the origin of the ImageEffect's coordinates. </font><font style="vertical-align: inherit;">For example, the following two lines of code invert colors when the x and y coordinates are less than half, respectively.</font></font></p>
<div class="emlist-code">
<p class="caption">Practice/ImageEffectShader_01.shader</p>
<pre class="emlist">color.rgb = input.uv.x &lt; 0.5 ? 1 - color.rgb : color.rgb;<font></font>
color.rgb = input.uv.y &lt; 0.5 ? 1 - color.rgb : color.rgb;<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Did you confirm from the color change that the origin of the coordinates given to ImageEffect is the lower left?</font></font></p>

<h3><a id="h9-6-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.6.2 Easy　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diagonal half</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I mentioned earlier that the top, bottom, left, and right halves are easy, but in reality, the diagonal halves are also easy. </font><font style="vertical-align: inherit;">You can apply the effect (invert the color) diagonally in half with the following source code.</font></font></p>
<div class="emlist-code">
<p class="caption">Practice/ImageEffectShader_02.shader</p>
<pre class="emlist">color.rgb = input.uv.y &lt; input.uv.x ? 1 - color.rgb : color.rgb;
</pre>
</div>

<h2><a id="h9-7"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.7　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Convenient definition values ​​for coordinates</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That was introduced as UnityCg.cginc The </font></font><code class="inline-code tt">vertex vert_img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">killing </font></font><code class="inline-code tt">appdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of such useful functions and structures have been defined, convenient value in implementing the ImageEffect In addition to these have been defined.</font></font></p>

<h3><a id="h9-7-1"></a><span class="secno">9.7.1　</span>_ScreenParams</h3>
<p><code class="inline-code tt">_ScreenParams</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is </font></font><code class="inline-code tt">float4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the type of value, </font></font><code class="inline-code tt">x, y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to the pixel width and height of the image to be output, respectively, </font></font><code class="inline-code tt">w, z</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the </font></font><code class="inline-code tt">1 + 1 / x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">1 + 1 / y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we are given.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, when you run the rendering of 640x480 size, </font></font><code class="inline-code tt">x = 640</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">y = 480</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">z = 1 + 1 / 640</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">z = 1 + 1 / 480</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and will be. </font><font style="vertical-align: inherit;">As a matter of fact, </font></font><code class="inline-code tt">w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code class="inline-code tt">z</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it would not have to use so much.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the other hand </font></font><code class="inline-code tt">x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the value of is often used to calculate, for example, how many pixels on an image it corresponds to, or to calculate the aspect ratio. </font><font style="vertical-align: inherit;">These are important for creating elaborate effects, but it would be helpful if Unity provided them without giving any values ​​from the script. </font><font style="vertical-align: inherit;">If you put it in the corner of your head, it may help you to read other shaders.</font></font></p>

<h3><a id="h9-7-2"></a><span class="secno">9.7.2　</span>_TexelSize</h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One of the similar </font></font><code class="inline-code tt">&lt;sampler2Dの変数名&gt;_TexelSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definition values ​​is. </font><font style="vertical-align: inherit;">Here it </font></font><code class="inline-code tt">_MainTex_TexelSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will be.</font></font></p>
<p><code class="inline-code tt">_ScreenParams</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When the same </font></font><code class="inline-code tt">float4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but the type of values, </font></font><code class="inline-code tt">x = 1 / width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">y = 1 / height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">z = width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="inline-code tt">y = height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and, different value given to each element. </font><font style="vertical-align: inherit;">Another </font></font><code class="inline-code tt">sampler2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">feature is that the values ​​differ depending on the </font><font style="vertical-align: inherit;">corresponding </font><font style="vertical-align: inherit;">type. </font></font><code class="inline-code tt">_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regardless, </font></font><code class="inline-code tt">~_TexlSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if you define </font><font style="vertical-align: inherit;">a corresponding </font><font style="vertical-align: inherit;">, Unity will give you a value.</font></font></p>
<p><code class="inline-code tt">_ScreenParams</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are many ImageEffects that </font></font><code class="inline-code tt">_MainTex_TexelSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use, but I think </font><font style="vertical-align: inherit;">it </font><font style="vertical-align: inherit;">'s easier to use.</font></font></p>

<h3><a id="h9-7-3"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.7.3　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Refer to one pixel</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, it is often the case in image processing that you want to refer to the color (value) of the next pixel, but you can refer to the value of the next pixel with the following code.</font></font></p>
<div class="emlist-code">
<p class="caption">Practice/ImageEffectShader_03.shader</p>
<pre class="emlist">sampler2D _MainTex;<font></font>
float4    _MainTex_TexelSize;<font></font>
<font></font>
fixed4 frag(v2f_img input) : SV_Target<font></font>
{<font></font>
    float4 color = tex2D(_MainTex, input.uv);<font></font>
<font></font>
    color += tex2D(_MainTex, input.uv + float2(_MainTex_TexelSize.x, 0));<font></font>
    color += tex2D(_MainTex, input.uv - float2(_MainTex_TexelSize.x, 0));<font></font>
    color += tex2D(_MainTex, input.uv + float2(0, _MainTex_TexelSize.y));<font></font>
    color += tex2D(_MainTex, input.uv - float2(0, _MainTex_TexelSize.y));<font></font>
<font></font>
    color = color / 5;<font></font>
<font></font>
    return color;<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This code references the four surrounding pixels and returns the average value. </font><font style="vertical-align: inherit;">In image processing, it is literally called a smoothing filter. </font><font style="vertical-align: inherit;">In addition, a higher quality noise reduction filter may be implemented by referring to the surrounding pixels in the same way, and it is also used in edge / contour detection filters, for example.</font></font></p>

<h2><a id="h9-8"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.8　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtaining depth and normals</font></font></h2>
<div id="id_SimpleImageEffect_2F03mono" class="image">
<img src="./Chapter 9 _ ImageEffect Getting Started_files/03mono.png" alt="Image of G-Buffer">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 9.3: Image of G-Buffer
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When implementing a material (shader) to apply to a model, you will often refer to the model's depth and normal information. </font><font style="vertical-align: inherit;">ImageEffect, which manipulates two-dimensional image information, does not seem to be able to acquire depth and normal information, but there is a method to acquire the depth and normal information of an object projected on a certain pixel on the image. I have.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To explain the technical details, it is necessary to explain the rendering pipeline, which will be a little long, so let me omit it. </font><font style="vertical-align: inherit;">Briefly, depth information and normal information corresponding to a pixel on the image to be drawn can be buffered. </font><font style="vertical-align: inherit;">Those buffers are called G-Buffers. </font><font style="vertical-align: inherit;">Some G-Buffers store colors and depths. </font><font style="vertical-align: inherit;">(By the way, the original paper shows that the reading of G-Buffer is "game buffer".)</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When drawing an object, the depth and normal information is also written in the buffer, and it is referenced by ImageEffect, which is executed at the end of drawing. </font><font style="vertical-align: inherit;">This technique plays an important role in Deffered rendering, but it can also be used in Forward rendering.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These discussions use a sample "ImageEffect" scene and a resource with the same name.</font></font></p>

<h3><a id="h9-8-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.8.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Settings for getting depth and normal information</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A little setting is required to refer to the depth and normal information in ImageEffect. </font><font style="vertical-align: inherit;">Since the basic functions are common, here we will set it in ImageEffect.cs, which inherits ImageEffectBase.cs.</font></font></p>
<div class="emlist-code">
<p class="caption">ImageEffect.cs</p>
<pre class="emlist">public class ImageEffect : ImageEffectBase<font></font>
{<font></font>
    protected new Camera camera;<font></font>
    public DepthTextureMode depthTextureMode;<font></font>
<font></font>
    protected override void Start()<font></font>
    {<font></font>
        base.Start();<font></font>
<font></font>
        this.camera = base.GetComponent&lt;Camera&gt;();<font></font>
        this.camera.depthTextureMode = this.depthTextureMode;<font></font>
    }<font></font>
<font></font>
    protected virtual void OnValidate()<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    {</font></font></font></font><font></font>
        if (this.camera != null)<font></font>
        {<font></font>
            this.camera.depthTextureMode = this.depthTextureMode;<font></font>
        }<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font></font></font><font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To get the depth and normal information, </font></font><code class="inline-code tt">DepthTextureMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you need to set the </font><font style="vertical-align: inherit;">camera </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This is a setting to control how information such as depth and normal is written. </font><font style="vertical-align: inherit;">The initial value is </font></font><code class="inline-code tt">None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unfortunately, it </font></font><code class="inline-code tt">DepthTextureMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'s a parameter that doesn't appear in the camera's Inspector, so you'll need to optionally get a camera reference from the script and set it.</font></font></p>
<p><code class="inline-code tt">OnValidate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> For those who haven't used the method very often, it is the method that is called when the parameter is updated on the Inspector.</font></font></p>

<h3><a id="h9-8-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.8.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DepthTextureMode value</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use the code presented here </font></font><code class="inline-code tt">DepthTextureMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to change the value of inspector. </font><font style="vertical-align: inherit;">There are some values, but </font></font><code class="inline-code tt">DepthNormals</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">note that we use </font><font style="vertical-align: inherit;">here </font><font style="vertical-align: inherit;">.</font></font></p>
<p><code class="inline-code tt">Depth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If is set, it will be the setting to acquire only the depth information. </font><font style="vertical-align: inherit;">However </font></font><code class="inline-code tt">Depth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">theft </font></font><code class="inline-code tt">DepthNormals</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">door, the slightly different procedure to obtain the depth information from the shader. </font><font style="vertical-align: inherit;">Also </font></font><code class="inline-code tt">MotionVectors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">by setting the, How can a lot of fun can get the information of the motion corresponding to each pixel, a little because the longer and all commentary, please let omitted in this place.</font></font></p>

<h2><a id="h9-9"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.9　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Getting depth and normals on shaders</font></font></h2>
<p><font style="vertical-align: inherit;"></font><code class="inline-code tt">DepthTextureMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here's how to get depth and normal information from the shader when set to </font><font style="vertical-align: inherit;">camera </font><font style="vertical-align: inherit;">:</font></font></p>
<p><code class="inline-code tt">_CameraDepthNormalsTexture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is </font></font><code class="inline-code tt">_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">given depth and normal information, just as the image to draw is given </font></font><code class="inline-code tt">sampler2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Therefore </font></font><code class="inline-code tt">input.uv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you can use to get the depth and normal information for a pixel with an image to draw.</font></font></p>
<div class="emlist-code">
<p class="caption">ImageEffect.shader</p>
<pre class="emlist">sampler2D _MainTex;<font></font>
sampler2D _CameraDepthNormalsTexture;<font></font>
<font></font>
fixed4 frag(v2f_img input) : SV_Target<font></font>
{<font></font>
    float4 color = tex2D(_MainTex, input.uv);<font></font>
    float3 normal;<font></font>
    float  depth;<font></font>
<font></font>
    DecodeDepthNormal<font></font>
    (tex2D(_CameraDepthNormalsTexture, input.uv), depth, normal);<font></font>
<font></font>
    depth = Linear01Depth(depth);<font></font>
    return fixed4(depth, depth, depth, 1);<font></font>
<font></font>
    return fixed4(normal.xyz, 1);<font></font>
}<font></font>
</pre>
</div>
<p><code class="inline-code tt">_CameraDepthNormalsTexture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The values ​​that can be obtained from are the sum of the depth and normal values, so we need to decompose them into their respective values. </font><font style="vertical-align: inherit;">The function for decomposing is the one provided by Unity. </font></font><code class="inline-code tt">DecodeDepthNormal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Give the function a variable to assign the value you want to decompose and the result.</font></font></p>

<h3><a id="h9-9-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.9.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Acquisition and visualization of depth information</font></font></h3>
<div id="id_SimpleImageEffect_2F04mono" class="image">
<img src="./Chapter 9 _ ImageEffect Getting Started_files/04mono.png" alt="Depth visualization with ImageEffect">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 9.4: Depth visualization with ImageEffect
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I will explain the depth information first. </font><font style="vertical-align: inherit;">Depth information is actually handled differently depending on the platform. </font><font style="vertical-align: inherit;">Unity provides some mechanisms to absorb the difference </font></font><code class="inline-code tt">Linear01Depth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but I think it's better to use a function </font><font style="vertical-align: inherit;">when implementing ImageEffect </font><font style="vertical-align: inherit;">. </font></font><code class="inline-code tt">Linear01Depth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is a function to normalize the obtained depth value from 0 to 1.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the sample, the acquired depth value is given to R, G, and B to visualize the depth value. </font></font><code class="inline-code tt">Clipping Planes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is recommended to </font><font style="vertical-align: inherit;">move the camera in the scene or </font><font style="vertical-align: inherit;">change the value from the Inspector to see how it changes.</font></font></p>

<h3><a id="h9-9-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.9.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Visualization of normal information</font></font></h3>
<div id="id_SimpleImageEffect_2F05mono" class="image">
<img src="./Chapter 9 _ ImageEffect Getting Started_files/05mono.png" alt="Visualization of normals with ImageEffect">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 9.5: ImageEffect Visualization of Normals
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualization of normal information is not as complicated as depth information. </font><font style="vertical-align: inherit;">The normal information is equivalent to that referenced by scripts and common shaders. </font><font style="vertical-align: inherit;">X, YZ information indicating the direction of the surface projected on a pixel is given in a format normalized to 0 to 1.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you just want to check if the normals are obtained correctly, you can output the values ​​of X, Y, Z as R, G, B as they are. </font><font style="vertical-align: inherit;">In other words, the face facing to the right has a larger value of X = R and becomes more red, and the face facing upward has a value of Y = G and becomes greener.</font></font></p>

<h2><a id="h9-10"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.10　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reference</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main references in this chapter are: </font><font style="vertical-align: inherit;">Both are official Unity.</font></font></p>
<ul>
<li>Writing Image Effects- <a href="https://docs.unity3d.com/540/Documentation/Manual/WritingImageEffects.html" class="link">https://docs.unity3d.com/540/Documentation/Manual/WritingImageEffects.html</a></li>
<li>Accessing shader properties in Cg/HLSL - <a href="https://docs.unity3d.com/Manual/SL-PropertiesInPrograms.html" class="link">https://docs.unity3d.com/Manual/SL-PropertiesInPrograms.html</a></li>
<li>Using Depth Textures - <a href="https://docs.unity3d.com/ja/current/Manual/SL-DepthTextures.html" class="link">https://docs.unity3d.com/ja/current/Manual/SL-DepthTextures.html</a></li>
</ul><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./Chapter 9 _ ImageEffect Getting Started_files/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="Language Translate Widget" style="visibility: visible; box-sizing: content-box; width: 1001px; height: 263px; display: none;" src="./Chapter 9 _ ImageEffect Getting Started_files/saved_resource(1).html"></iframe><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="https://www.gstatic.com/images/branding/product/1x/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="Language Translate Widget" style="visibility: visible; box-sizing: content-box; width: 197px; height: 69px; display: none;" src="./Chapter 9 _ ImageEffect Getting Started_files/saved_resource(2).html"></iframe><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="https://www.gstatic.com/images/branding/product/1x/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="https://www.gstatic.com/images/branding/product/1x/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="Language Translate Widget" style="visibility: visible; box-sizing: content-box; width: 1001px; height: 263px; display: none;"></iframe><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="Language Translate Widget" style="visibility: visible; box-sizing: content-box; width: 197px; height: 69px; display: none;"></iframe><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="Language Translate Widget" style="visibility: visible; box-sizing: content-box; width: 1001px; height: 263px; display: none;"></iframe><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="Language Translate Widget" style="visibility: visible; box-sizing: content-box; width: 197px; height: 69px; display: none;"></iframe></body></html>