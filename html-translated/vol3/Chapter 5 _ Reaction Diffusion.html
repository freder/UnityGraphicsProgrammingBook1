<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ops="http://www.idpf.org/2007/ops" xml:lang="en" class="translated-ltr" style="height: 100%;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <link rel="stylesheet" type="text/css" href="./Chapter 5 _ Reaction Diffusion_files/style.scss">
  <meta name="generator" content="Re:VIEW">
  <title>Reaction Diffusion</title>

			<style>
				img {
					max-width: 80vw;
					max-height: 80vh;
				}
			</style><style>
					.goog-te-banner-frame {
						display: none;
					}
				</style>
			<script>(function(){(function injection() {
  var pageLang = 'ja';
  var userLang = 'en';

  var uid = '1E07F158C6FA4460B352973E9693B329';
  var teId = 'TE_' + uid;
  var cbId = 'TECB_' + uid;

  function show() {
    window.setTimeout(function() {
      window[teId].showBanner(true);
    }, 10);
  }

  function newElem() {
    
  }

  if (window[teId]) {
    show();
  } else {
    if (!window.google || !google.translate ||
        !google.translate.TranslateElement) {
      if (!window[cbId]) {
        window[cbId] = function() {
          window[teId] = newElem();
          show();
        };
      }
      
    }
  }
})();})();</script><script src="https://translate.google.com/translate_a/element.js?cb=TECB_1E07F158C6FA4460B352973E9693B329&amp;client=tee&amp;hl=en"></script><script src="./Chapter 5 _ Reaction Diffusion_files/f.txt"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="https://translate.googleapis.com/translate_static/css/translateelement.css"><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/translate_static/js/element/main.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./Chapter 5 _ Reaction Diffusion_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="./Chapter 5 _ Reaction Diffusion_files/main.js"></script><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/element/TE_20201130_00/e/js/element/element_main.js"></script><script type="text/javascript" charset="UTF-8" src="./Chapter 5 _ Reaction Diffusion_files/element_main.js"></script><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/element/TE_20201130_00/e/js/element/element_main.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="https://translate.googleapis.com/translate_static/css/translateelement.css"><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/translate_static/js/element/main.js"></script><script type="text/javascript" charset="UTF-8" src="https://translate.googleapis.com/element/TE_20201130_00/e/js/element/element_main.js"></script></head>
		
<body style="position: relative; min-height: 100%; top: 40px;"><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:''" style="visibility:visible"></iframe></div><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:''" style="visibility:visible"></iframe></div><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:''" style="visibility:visible"></iframe></div>
<h1><a id="h5"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chapter 5　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reaction Diffusion</font></font></h1>

<h2><a id="h5-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Introduction</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In nature, there are various patterns such as horizontal stripes of tropical fish and wrinkles like a maze of coral. </font><font style="vertical-align: inherit;">The genius mathematician Alan Turing expressed the occurrence of these patterns that exist in nature with mathematical formulas. </font><font style="vertical-align: inherit;">The pattern generated by the mathematical formulas he derived is called the "Turing pattern". </font><font style="vertical-align: inherit;">This equation is commonly referred to as the reaction-diffusion equation. </font><font style="vertical-align: inherit;">Based on this reaction-diffusion equation, we will develop a program to create a picture like a pattern of a living thing using Compute Shader on Unity. </font><font style="vertical-align: inherit;">At first, we will create a program that operates on a two-dimensional plane, but at the end, we will also introduce a program that operates on a three-dimensional space. </font><font style="vertical-align: inherit;">For details on ComputeShader, refer to "Chapter 2 Introduction to ComputeShader" in UnityGraphicsProgramming vol.1.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The sample in this chapter is </font><font style="vertical-align: inherit;">"Reaction Diffusion" from </font></font><br><a href="https://github.com/IndieVisualLab/UnityGraphicsProgramming3" class="link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/IndieVisualLab/UnityGraphicsProgramming3</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2><a id="h5-2"></a><span class="secno">5.2　</span>Reaction Diffusionとは</h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As the name suggests, Reaction Diffusion is a local chemical reaction in which the concentrations of one or more substances distributed in a space change with each other, and space. It is a mathematical model of how diffusion, which spreads throughout the whole, changes due to the influence of two processes. </font><font style="vertical-align: inherit;">This time, we will use the "Gray-Scott model" as the reaction-diffusion equation. </font><font style="vertical-align: inherit;">The Gray-Scott model was published in a treatise by P. Gray and SKScott in 1983. </font><font style="vertical-align: inherit;">Roughly speaking, when two virtual substances, U and V, are filled in the grid, they react with each other to increase or decrease or diffuse, and the concentration in the space changes over time. Various patterns will appear as you go.</font></font></p>
<p><span class="imgref"><a href="https://freder.io/files/unity3/kaiware007.html#id_kaiware_2Fdescription"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 5.1</font></font></a></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a</font><span class="imgref"><a href="https://freder.io/files/unity3/kaiware007.html#id_kaiware_2Fdescription"><font style="vertical-align: inherit;"> schematic diagram</font></a></span><font style="vertical-align: inherit;"> of the “Reaction” of the Gray-Scott model.</font></font></p>
<div id="id_kaiware_2Fdescription" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/description.png" alt="Schematic diagram of &quot;Reaction&quot; of Gray-Scott model">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.1: Schematic diagram of the "Reaction" of the Gray-Scott model
</font></font></p>
</div>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U is fed into the space at a constant rate</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When there are two Vs, it reacts with U to create another V.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since V will continue to increase as it is, V will be deleted (Kill) at a certain rate.</font></font></li>
</ol>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also, as </font></font><span class="imgref"><a href="https://freder.io/files/unity3/kaiware007.html#id_kaiware_2Fdiffusion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shown in Figure 5.2</font></font></a></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , U and V spread to the adjacent grid at different speeds.</font></font></p>
<div id="id_kaiware_2Fdiffusion" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/diffusion.png" alt="Outline of &quot;Diffusion&quot; of Gray-Scott model">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.2: Schematic diagram of "Diffusion" in the Gray-Scott model
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This difference in diffusion rate creates a difference in U and V concentrations, creating a pattern. </font><font style="vertical-align: inherit;">The reaction and diffusion of these U and V are expressed by the following equations.</font></font></p>
<div class="equation">
<pre>\frac{\partial u}{\partial t} = Du \Delta u - uv^2 + f_{(1-u)}
</pre>
</div>
<div class="equation">
<pre>\frac{\partial v}{\partial t} = Dv \Delta v + uv^2 - (f_{}+k)
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this formula, U is </font><font style="vertical-align: inherit;">represented by </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">u</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and V is </font><font style="vertical-align: inherit;">represented by </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The formula is roughly divided into three. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Du \ Delta u</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dv \ Delta v</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are called the diffusion terms, and the first </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Du</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dv</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are </font><font style="vertical-align: inherit;">constants of the diffusion rate of </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">u</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The latter half, </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ Delta u</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ Delta v,</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are called Laplacian, and represent the process of diffusion in the direction of eliminating the concentration difference between the surroundings of U and V. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second is called the reaction term, and </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uv ^ 2</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indicates that U decreases and V increases by reacting with one U and two V. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The third </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ f_ {(1-u)}</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is called the inflow term and represents the amount to be replenished (Feed) when U decreases. The closer it is to 0, the more it is replenished, and the closer it is to 1, the more it is replenished. lose. </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-(f_ {} + k)</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is called the outflow term, which means that the increased V is reduced by a certain number (Kill).</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To summarize a little more simply, U decreases and V increases in response to one U and two Vs. </font><font style="vertical-align: inherit;">At this rate, U will continue to decrease and V will continue to increase, so U </font><font style="vertical-align: inherit;">will be replenished by </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ f_ {(1-u)}</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and V will be </font><font style="vertical-align: inherit;">forcibly decreased by- </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(f_ {} + k).</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It has become. </font><font style="vertical-align: inherit;">Then, U and V are </font><font style="vertical-align: inherit;">diffused to the surroundings by </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Du \ Delta u</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><span class="equation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dv \ Delta v</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2><a id="h5-3"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Implementation in Unity</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that I have somehow understood the atmosphere of the equation, I will move on to the explanation of the implementation in Unity. </font><font style="vertical-align: inherit;">The sample scene </font><font style="vertical-align: inherit;">whose </font><font style="vertical-align: inherit;">operation can be confirmed is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReactionDiffusion2D_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h3><a id="h5-3-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Definition of grid structure</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose you have U and V density values ​​in a two-dimensional planar grid. </font><font style="vertical-align: inherit;">This time, we will use Compute Shader to process in parallel, so we will manage the grid with Compute Buffer. </font><font style="vertical-align: inherit;">First, define the structure in one grid.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.cs</p>
<pre class="emlist">public struct RDData<font></font>
{<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    public float u; // U concentration</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    public float v; // V concentration</font></font><font></font>
}<font></font>
</pre>
</div>

<h3><a id="h5-3-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initialization</font></font></h3>
<div class="emlist-code">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReactionDiffusion2D.cs</font></font></font></font></p>
<pre class="emlist">/// &lt;summary&gt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Initialization</font></font><font></font>
/// &lt;/summary&gt;<font></font>
void Initialize()<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font>
    ...<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    int wh = texWidth * texHeight; // Buffer size</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    buffers = new ComputeBuffer [2]; // Array initialization of ComputeBuffer for double buffering</font></font><font></font>
<font></font>
    for (int i = 0; i &lt; buffers.Length; i++)<font></font>
    {<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        // Grid initialization</font></font><font></font>
        buffers[i] = new ComputeBuffer(wh, Marshal.SizeOf(typeof(RDData)));<font></font>
    }<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // Grid array for reset</font></font><font></font>
    bufData = new RDData[wh];<font></font>
    bufData2 = new RDData[wh];<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // Buffer initialization</font></font><font></font>
    ResetBuffer();<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // Initialize the Seed addition buffer</font></font><font></font>
    inputData = new Vector2[inputMax];<font></font>
    inputIndex = 0;<font></font>
    inputBuffer = new ComputeBuffer(<font></font>
        inputMax, Marshal.SizeOf(typeof(Vector2))<font></font>
      );<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> of </font><font style="vertical-align: inherit;">ComputeBuffer for updating </font><font style="vertical-align: inherit;">are two-dimensional arrays, but there are two for reading and writing. </font><font style="vertical-align: inherit;">Because the Compute Shader is multi-threaded and processed in parallel. </font><font style="vertical-align: inherit;">When processing that changes the calculation result by referring to the surrounding grid like this time, if it is one buffer, the calculation result will be referred to the value of the grid that has been calculated earlier depending on the order of the threads to be processed. It will change. </font><font style="vertical-align: inherit;">In order to prevent it, it is divided into two parts, one for reading and the other for writing.</font></font></p>

<h3><a id="h5-3-3"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3.3　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Update process</font></font></h3>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.cs</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Update process</font></font><font></font>
void UpdateBuffer()<font></font>
{<font></font>
    cs.SetInt("_TexWidth", texWidth);<font></font>
    cs.SetInt("_TexHeight", texHeight);<font></font>
    cs.SetFloat("_DU", du);<font></font>
    cs.SetFloat("_DV", dv);<font></font>
<font></font>
    cs.SetFloat("_Feed", feed);<font></font>
    cs.SetFloat("_K", kill);<font></font>
<font></font>
    cs.SetBuffer(kernelUpdate, "_BufferRead", buffers[0]);<font></font>
    cs.SetBuffer(kernelUpdate, "_BufferWrite", buffers[1]);<font></font>
    cs.Dispatch(kernelUpdate,<font></font>
      Mathf.CeilToInt((float)texWidth / THREAD_NUM_X),<font></font>
      Mathf.CeilToInt((float)texHeight / THREAD_NUM_X),<font></font>
      1);<font></font>
<font></font>
    SwapBuffer();<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the source on the C # side, the parameters that were also in the above equation are passed to the Compute Shader for update processing. </font><font style="vertical-align: inherit;">Next, the update process in Compute Shader is explained.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.compute</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Update process</font></font><font></font>
[numthreads(THREAD_NUM_X, THREAD_NUM_X, 1)]<font></font>
void Update(uint3 id : SV_DispatchThreadID)<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font>
<font></font>
  int idx = GetIndex(id.x, id.y);<font></font>
  float u = _BufferRead[idx].u;<font></font>
  float v = _BufferRead[idx].v;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  float uvv = u * v * v;</font></font><font></font>
  float f, k;<font></font>
<font></font>
  f = _Feed;<font></font>
  k = _K;<font></font>
<font></font>
  _BufferWrite[idx].u = saturate(<font></font>
      u + (_DU * LaplaceU(id.x, id.y) - uvv + f * (1.0 - u))<font></font>
    );<font></font>
  _BufferWrite[idx].v = saturate(<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      v + (_DV * LaplaceV (id.x, id.y) + uvv - (k + f) * v)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    );</font></font><font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The calculation is exactly the same as the above equation. </font><font style="vertical-align: inherit;">GetIndex () is a function for associating 2D grid coordinates with 1D ComputeBuffer index.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.compute</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Buffer index calculation</font></font><font></font>
int GetIndex(int x, int y) {<font></font>
  x = (x &lt; 0) ? x + _TexWidth : x;<font></font>
  x = (x &gt;= _TexWidth) ? x - _TexWidth : x;<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  y = (y &lt;0)? </font><font style="vertical-align: inherit;">y + _TexHeight: y;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  y = (y&gt; = _TexHeight)? </font><font style="vertical-align: inherit;">y - _TexHeight: y;</font></font><font></font>
<font></font>
  return y * _TexWidth + x;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_BufferRead contains the calculation result one frame before. </font><font style="vertical-align: inherit;">Extract u and v from there. </font><font style="vertical-align: inherit;">LaplaceU and LaplaceV are Laplacian functions that collect the U and V concentrations of 8 squares around your grid. </font><font style="vertical-align: inherit;">This will average the surrounding grid and density. </font><font style="vertical-align: inherit;">The diagonal grid is adjusted to have a low degree of influence.</font></font></p>
<div class="emlist-code">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReactionDiffusion2D.compute</font></font></p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Laplacian function of U</font></font><font></font>
float LaplaceU(int x, int y) {<font></font>
  float sumU = 0;<font></font>
<font></font>
  for (int i = 0; i &lt; 9; i++) {<font></font>
    int2 pos = laplaceIndex[i];<font></font>
    int idx = GetIndex(x + pos.x, y + pos.y);<font></font>
    sumU += _BufferRead[idx].u * laplacePower[i];<font></font>
  }<font></font>
<font></font>
  return sumU;<font></font>
}<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Laplacian function of V</font></font><font></font>
float LaplaceV(int x, int y) {<font></font>
  float sumV = 0;<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  for (int i = 0; i &lt; 9; i++) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    int2 pos = laplaceIndex[i];</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    int idx = GetIndex(x + pos.x, y + pos.y);</font></font><font></font>
    sumV += _BufferRead[idx].v * laplacePower[i];<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }</font></font><font></font>
<font></font>
  return sumV;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After calculating u and v, write to _BufferWrite. </font><font style="vertical-align: inherit;">saturate is insurance for clipping between 0 and 1.</font></font></p>

<h3><a id="h5-3-4"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3.4　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Input processing</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By pressing the A key and C key, the function to intentionally add the density difference between U and V to the grid is provided. </font><font style="vertical-align: inherit;">Press the A key to place SeedNum points (Seeds) at random positions. </font><font style="vertical-align: inherit;">Press the C key to place one point in the center.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.cs</p>
<pre class="emlist">/// &lt;summary&gt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Add Seed</font></font><font></font>
/// &lt;/summary&gt;<font></font>
/// &lt;param name="x"&gt;&lt;/param&gt;<font></font>
/// &lt;param name="y"&gt;&lt;/param&gt;<font></font>
void AddSeed(int x, int y)<font></font>
{<font></font>
  if (inputIndex &lt; inputMax)<font></font>
  {<font></font>
    inputData[inputIndex].x = x;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    inputData [inputIndex] .y = y;</font></font><font></font>
    inputIndex++;<font></font>
  }<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The inputData array stores the coordinates of the points on the grid.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.cs</p>
<pre class="emlist">/// &lt;summary&gt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Pass the Seed array to the Compute Shader</font></font><font></font>
/// &lt;/summary&gt;<font></font>
void AddSeedBuffer()<font></font>
{<font></font>
  if (inputIndex &gt; 0)<font></font>
  {<font></font>
    inputBuffer.SetData(inputData);<font></font>
    cs.SetInt("_InputNum", inputIndex);<font></font>
    cs.SetInt("_TexWidth", texWidth);<font></font>
    cs.SetInt("_TexHeight", texHeight);<font></font>
    cs.SetInt("_SeedSize", seedSize);<font></font>
    cs.SetBuffer(kernelAddSeed, "_InputBufferRead", inputBuffer);<font></font>
    cs.SetBuffer(kernelAddSeed, "_BufferWrite", buffers[0]);    // update前なので0<font></font>
    cs.Dispatch(kernelAddSeed,<font></font>
      Mathf.CeilToInt((float)inputIndex / (float)THREAD_NUM_X),<font></font>
      1,<font></font>
      1);<font></font>
    inputIndex = 0;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inputBuffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in, set the inputeData array coordinates entered in the previous point, you pass to ComputeShader.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.compute</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Add seed</font></font><font></font>
[numthreads(THREAD_NUM_X, 1, 1)]<font></font>
void AddSeed(uint id : SV_DispatchThreadID)<font></font>
{<font></font>
  if (_InputNum &lt;= id) return;<font></font>
<font></font>
  int w = _SeedSize;<font></font>
  int h = _SeedSize;<font></font>
  float radius = _SeedSize * 0.5;<font></font>
<font></font>
  int centerX = _InputBufferRead[id].x;<font></font>
  int centerY = _InputBufferRead[id].y;<font></font>
  int startX = _InputBufferRead[id].x - w / 2;<font></font>
  int startY = _InputBufferRead[id].y - h / 2;<font></font>
  for (int x = 0; x &lt; w; x++)<font></font>
  {<font></font>
    for (int y = 0; y &lt; h; y++)<font></font>
    {<font></font>
      float dis = distance(<font></font>
        float2(centerX, centerY),<font></font>
        float2(startX + x, startY + y)<font></font>
      );<font></font>
      if (dis &lt;= radius) {<font></font>
        _BufferWrite[GetIndex((centerX + x), (centerY + y))].v = 1;<font></font>
      }<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The value of v is set to 1 so that it becomes a circle around the coordinates of the inputBuffer passed from C #.</font></font></p>

<h3><a id="h5-3-5"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3.5　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Write the result to RenderTexture</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the updated grid is just an array, write it to RenderTexture for visualization and make it an image. </font><font style="vertical-align: inherit;">Write the density difference between u and v in RenderTexture. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, create a Render Texture. </font><font style="vertical-align: inherit;">Since the only information to be written to one pixel is the density difference, set RenderTextureFormat to RFloat. </font><font style="vertical-align: inherit;">RenderTextureFormat.RFloat is a RenderTexture format that can write information for one float per pixel.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.cs</p>
<pre class="emlist">/// &lt;summary&gt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Create Render Texture</font></font><font></font>
/// &lt;/summary&gt;<font></font>
/// &lt;param name="width"&gt;&lt;/param&gt;<font></font>
/// &lt;param name="height"&gt;&lt;/param&gt;<font></font>
/// &lt;returns&gt;&lt;/returns&gt;<font></font>
RenderTexture CreateRenderTexture(int width, int height)<font></font>
{<font></font>
  RenderTexture tex = new RenderTexture(width, height, 0,<font></font>
    RenderTextureFormat.RFloat,<font></font>
    RenderTextureReadWrite.Linear);<font></font>
  tex.enableRandomWrite = true;<font></font>
  tex.filterMode = FilterMode.Bilinear;<font></font>
  tex.wrapMode = TextureWrapMode.Repeat;<font></font>
  tex.Create();<font></font>
<font></font>
  return tex;<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, it is the process on the C # side that passes RenderTexture to ComputeShader and writes it.</font></font></p>
<div class="emlist-code">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReactionDiffusion2D.cs</font></font></font></font></p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/// &lt;summary&gt;</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Write the result of Reaction Diffusion to the texture</font></font><font></font>
/// &lt;/summary&gt;<font></font>
void DrawTexture()<font></font>
{<font></font>
  cs.SetInt("_TexWidth", texWidth);<font></font>
  cs.SetInt("_TexHeight", texHeight);<font></font>
  cs.SetBuffer(kernelDraw, "_BufferRead", buffers[0]);<font></font>
  cs.SetTexture(kernelDraw, "_HeightMap", resultTexture);<font></font>
  cs.Dispatch(kernelDraw,<font></font>
    Mathf.CeilToInt((float)texWidth / THREAD_NUM_X),<font></font>
    Mathf.CeilToInt((float)texHeight / THREAD_NUM_X),<font></font>
    1);<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is the processing on the Compute Shader side, the density difference between u and v is obtained from the buffer of the grid and written to the texture.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.compute</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Value calculation for texture writing</font></font><font></font>
float GetValue(int x, int y) {<font></font>
  int idx = GetIndex(x, y);<font></font>
  float u = _BufferRead[idx].u;<font></font>
  float v = _BufferRead[idx].v;<font></font>
  return 1 - clamp(u - v, 0, 1);<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
<font></font>
...<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Draw on texture</font></font><font></font>
[numthreads(THREAD_NUM_X, THREAD_NUM_X, 1)]<font></font>
void Draw(uint3 id : SV_DispatchThreadID)<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font>
  float c = GetValue(id.x, id.y);<font></font>
<font></font>
  // height map<font></font>
  _HeightMap[id.xy] = c;<font></font>
<font></font>
}<font></font>
</pre>
</div>

<h3><a id="h5-3-6"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3.6　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Drawing</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The normal Unlit Shader is modified and the two colors are interpolated based on the brightness of the texture created in the previous section.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.cs</p>
<pre class="emlist">/// &lt;summary&gt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Material update</font></font><font></font>
/// &lt;/summary&gt;<font></font>
void UpdateMaterial()<font></font>
{<font></font>
  material.SetTexture("_MainTex", resultTexture);<font></font>
<font></font>
  material.SetColor("_Color0", bottomColor);<font></font>
  material.SetColor("_Color1", topColor);<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
</pre>
</div>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2D.shader</p>
<pre class="emlist">fixed4 frag (v2f i) : SV_Target<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font>
  // sample the texture<font></font>
  fixed4 col = lerp(_Color0, _Color1, tex2D(_MainTex, i.uv).r);<font></font>
  return col;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When executed, a creature-like pattern should spread on the screen.</font></font></p>
<div id="id_kaiware_2Frd2d__1" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/rd2d_1.png" alt="State of simulation" class="width-050per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.3: Simulation
</font></font></p>
</div>

<h2><a id="h5-4"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Try changing the parameters</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Just by changing the Feed and Kill parameters a little, various patterns emerge. </font><font style="vertical-align: inherit;">Here are some parameter combinations.</font></font></p>
<br class="pagebreak">

<h3><a id="h5-4-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Coral-like pattern</font></font></h3>
<p>Feed:0.037 / Kill:0.06</p>
<div id="id_kaiware_2Fcoral" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/coral.png" alt="Coral-like pattern" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.4: Coral-like pattern
</font></font></p>
</div>

<h3><a id="h5-4-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crushed pattern</font></font></h3>
<p>Feed:0.03 / Kill:0.062</p>
<div id="id_kaiware_2Fpoints001" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/points001.png" alt="Crushed pattern" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.5: Crushed pattern
</font></font></p>
</div>
<br class="pagebreak">

<h3><a id="h5-4-3"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.3 Crushing　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seems to repeat disappearance and division</font></font></h3>
<p>Feed:0.0263 / Kill:0.06</p>
<div id="id_kaiware_2Fpoints002" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/points002.png" alt="It seems that crushing repeats disappearance and division" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.6: Crushing seems to repeat disappearance and division
</font></font></p>
</div>

<h3><a id="h5-4-4"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.4 It　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seems to stretch straight and avoid hitting</font></font></h3>
<p>Feed:0.077 / Kill:0.0615</p>
<div id="id_kaiware_2Fworm" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/worm.png" alt="It seems that it stretches straight and avoids hitting" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.7: A pattern that stretches straight and avoids collision
</font></font></p>
</div>
<br class="pagebreak">

<h3><a id="h5-4-5"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.5　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plump hole pattern</font></font></h3>
<p>Feed:0.039 / Kill:0.058</p>
<div id="id_kaiware_2Fhole" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/hole.png" alt="Plump hole pattern" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.8: Plump hole pattern
</font></font></p>
</div>

<h3><a id="h5-4-6"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.6 It　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seems that it is always undulating and unstable</font></font></h3>
<p>Feed:0.026 / Kill:0.051</p>
<div id="id_kaiware_2Fchaos" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/chaos.png" alt="It seems that it is always undulating and unstable" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.9: It seems that it is always undulating and unstable
</font></font></p>
</div>
<br class="pagebreak">

<h3><a id="h5-4-7"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.7 A　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pattern that continues to spread like ripples</font></font></h3>
<p>Feed:0.014 / Kill:0.0477</p>
<div id="id_kaiware_2Fwave" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/wave.png" alt="A pattern that continues to spread like ripples" class="width-040per">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.10: Pattern that continues to spread like ripples
</font></font></p>
</div>

<h2><a id="h5-5"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bonus: Surface Shader compatible version</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here, I will introduce a sample that expresses the beautiful texture unique to Unity using Surface Shader. </font><font style="vertical-align: inherit;">The sample scene </font><font style="vertical-align: inherit;">whose </font><font style="vertical-align: inherit;">operation can be confirmed is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReactionDiffusion2D_2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h3><a id="h5-5-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Changes from the regular version</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The process of ReactionDiffusion itself is the same as the normal version, but when creating the texture for drawing, a normal map is also created to give a three-dimensional effect. </font><font style="vertical-align: inherit;">Also, the resulting texture was RenderTextureFormat.RFloat, but since the normal map stores the normal vector in the XYZ directions, it is created with RenderTextureFormat.ARGBFloat.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2DForStandard.cs</p>
<pre class="emlist">void Initialize()<font></font>
{<font></font>
  ...<font></font>
  heightMapTexture = CreateRenderTexture(texWidth, texHeight,<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    RenderTextureFormat.RFloat); // Create texture for height map</font></font><font></font>
  normalMapTexture = CreateRenderTexture(texWidth, texHeight,<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    RenderTextureFormat.ARGBFloat); // Create texture for normal map map</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ...</font></font><font></font>
}<font></font>
<font></font>
/// &lt;summary&gt;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/// Create RenderTexture</font></font><font></font>
/// &lt;/summary&gt;<font></font>
/// &lt;param name="width"&gt;&lt;/param&gt;<font></font>
/// &lt;param name="height"&gt;&lt;/param&gt;<font></font>
/// &lt;param name="texFormat"&gt;&lt;/param&gt;<font></font>
/// &lt;returns&gt;&lt;/returns&gt;<font></font>
RenderTexture CreateRenderTexture(<font></font>
  int width,<font></font>
  int height,<font></font>
  RenderTextureFormat texFormat)<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font>
    RenderTexture tex = new RenderTexture(width, height, 0,<font></font>
      texFormat, RenderTextureReadWrite.Linear);<font></font>
    tex.enableRandomWrite = true;<font></font>
    tex.filterMode = FilterMode.Bilinear;<font></font>
    tex.wrapMode = TextureWrapMode.Repeat;<font></font>
    tex.Create();<font></font>
<font></font>
    return tex;<font></font>
}<font></font>
<font></font>
...<font></font>
<font></font>
void DrawTexture()<font></font>
{<font></font>
  ...<font></font>
  cs.SetTexture(kernelDraw, "_HeightMap", heightMapTexture);<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  cs.SetTexture (kernelDraw, "_NormalMap", normalMapTexture); // Texture set for normal map</font></font><font></font>
  cs.Dispatch(kernelDraw,<font></font>
    Mathf.CeilToInt((float)texWidth / THREAD_NUM_X),<font></font>
    Mathf.CeilToInt((float)texHeight / THREAD_NUM_X),<font></font>
    1);<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In ComputeShader, the slope is calculated from the density difference with the surrounding grid and written to the texture for the normal map.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2DStandard.compute</p>
<pre class="emlist">float3 GetNormal(int x, int y) {<font></font>
  float3 normal = float3(0, 0, 0);<font></font>
  float c = GetValue(x, y);<font></font>
  normal.x = ((GetValue(x - 1, y) - c) - (GetValue(x + 1, y) - c));<font></font>
  normal.y = ((GetValue(x, y - 1) - c) - (GetValue(x, y + 1) - c));<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  normal.z = 1;</font></font></font></font><font></font>
  normal = normalize(normal) * 0.5 + 0.5;<font></font>
  return normal;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Draw on texture</font></font><font></font>
[numthreads(THREAD_NUM_X, THREAD_NUM_X, 1)]<font></font>
void Draw(uint3 id : SV_DispatchThreadID)<font></font>
{<font></font>
  float c = GetValue(id.x, id.y);<font></font>
<font></font>
  // height map<font></font>
  _HeightMap[id.xy] = c;<font></font>
<font></font>
  // normal map<font></font>
  _NormalMap[id.xy] = float4(GetNormal(id.x, id.y), 1);<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pass the two created textures to the Surface Shader and draw the pattern. </font><font style="vertical-align: inherit;">Surface Shader is a shader wrapped for easy use of Unity's physics-based rendering, </font><font style="vertical-align: inherit;">just assign the necessary data to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SurfaceOutputStandard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> structure </font><font style="vertical-align: inherit;">in the surf function </font><font style="vertical-align: inherit;">and output it, and it will automatically </font><b><font style="vertical-align: inherit;">light</font></b><font style="vertical-align: inherit;"> it. ..</font></font></p>
<div class="emlist-code">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definition of SurfaceOutputStandard structure</font></font></p>
<pre class="emlist">struct SurfaceOutputStandard<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fixed3 Albedo; // Base (diffuse or specular) color</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fixed3 Normal; // normal</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    half3 Emission; // Emission color</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    half Metallic; // 0 = non-metal, 1 = metal</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    half Smoothness; // 0 = coarse, 1 = smooth</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    half Occlusion; // Occlusion (default 1)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fixed Alpha; // Transparency alpha</font></font><font></font>
};<font></font>
</pre>
</div>
<div class="emlist-code">
<p class="caption">ReactionDiffusion2DStandard.shader</p>
<pre class="emlist">void surf(Input IN, inout SurfaceOutputStandard o) {<font></font>
<font></font>
  float2 uv = IN.uv_MainTex;<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  // Get concentration</font></font><font></font>
  half v0 = tex2D(_MainTex, uv).x;<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  // Normal acquisition</font></font><font></font>
  float3 norm = UnpackNormal(tex2D(_NormalTex, uv));<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  // Get the value of the boundary between A and B</font></font><font></font>
  half p = smoothstep(_Threshold, _Threshold + _Fading, v0);<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  o.Albedo = lerp (_Color0.rgb, _Color1.rgb, p); // Base color</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  o.Alpha = lerp (_Color0.a, _Color1.a, p); // Alpha value</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  o.Smoothness = lerp (_Smoothness0, _Smoothness1, p); // Smoothness</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  o.Metallic = lerp (_Metallic0, _Metallic1, p); // Metallic</font></font><font></font>
  o.Normal = normalize(float3(norm.x, norm.y, 1 - _NormalStrength));  // 法線<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  o.Emission = lerp (_Emit0 * _EmitInt0, _Emit1 * _EmitInt1, p) .rgb; </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//⁇</font></font></font></font><font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use Unity's built-in function </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unpackNormal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to get the normals from the normal map. </font><font style="vertical-align: inherit;">In addition, </font><font style="vertical-align: inherit;">various colors and textures of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surface Output Standard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are set </font><font style="vertical-align: inherit;">from the ratio of density difference </font><font style="vertical-align: inherit;">.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When you run it, you should see something like the following.</font></font></p>
<div id="id_kaiware_2Frd__surface__shader" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/rd_surface_shader.png" alt="SurfaceShader版">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.11: Surface Shader version
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The normal map creates a three-dimensional effect. </font><font style="vertical-align: inherit;">In addition, although it is not known in monochrome, the gloss of the RGB 3-color point light in the scene is also expressed.</font></font></p>

<h2><a id="h5-6"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extension to 3D</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's extend Reaction Diffusion, which used to be a simulation on a two-dimensional plane, to three dimensions. </font><font style="vertical-align: inherit;">The basic flow is the same as for 2D, but since the dimension is increased by 1, the method of creating RenderTexture and ComputeBuffer and the method of Laplace operation are slightly different. </font><font style="vertical-align: inherit;">The sample scene </font><font style="vertical-align: inherit;">whose </font><font style="vertical-align: inherit;">operation can be confirmed is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReactionDiffusion3D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h3><a id="h5-6-1"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6.1　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Buffer initialization part</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some initialization processing is added to change the Render Texture to which the density difference is written from 2D to 3D.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion3D.cs</p>
<pre class="emlist">RenderTexture CreateTexture(int width, int height, int depth)<font></font>
{<font></font>
  RenderTexture tex = new RenderTexture(width, height, 0,<font></font>
    RenderTextureFormat.RFloat, RenderTextureReadWrite.Linear);<font></font>
  tex.volumeDepth = depth;<font></font>
  tex.enableRandomWrite = true;<font></font>
  tex.dimension = UnityEngine.Rendering.TextureDimension.Tex3D;<font></font>
  tex.filterMode = FilterMode.Bilinear;<font></font>
  tex.wrapMode = TextureWrapMode.Repeat;<font></font>
  tex.Create();<font></font>
<font></font>
  return tex;<font></font>
}<font></font>
</pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, put the depth in the Z direction in tex.volumeDepth. </font><font style="vertical-align: inherit;">Then I put UnityEngine.Rendering.TextureDimension.Tex3D in tex.dimension. </font><font style="vertical-align: inherit;">This is a setting to specify that RenderTexture is a 3D volume texture. </font><font style="vertical-align: inherit;">The Render Texture is now a 3D volume texture. </font><font style="vertical-align: inherit;">Similarly, the Compute Buffer that stores the Reaction Diffusion simulation results is also made three-dimensional. </font><font style="vertical-align: inherit;">This simply secures the size of width x height x depth.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion3D.cs</p>
<pre class="emlist">void Initialize()<font></font>
{<font></font>
  ...<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int whd = texWidth * texHeight * texDepth;</font></font></font></font><font></font>
  buffers = new ComputeBuffer[2];<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ...</font></font></font></font><font></font>
  for (int i = 0; i &lt; buffers.Length; i++)<font></font>
  {<font></font>
     buffers[i] = new ComputeBuffer(whd, Marshal.SizeOf(typeof(RDData)));<font></font>
  }<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ...</font></font></font></font><font></font>
}<font></font>
</pre>
</div>

<h3><a id="h5-6-2"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6.2　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Three-dimensional simulation</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next is the change on the Compute Shader side. </font><font style="vertical-align: inherit;">First, in order to RenderTexture for the writing of the result is a three-dimensional, ComputeShader of the side of the texture definition </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RWTexture2D &lt;float&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RWTexture3D &lt;float&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will change to.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion3D.compute</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  RWTexture3D &lt;float&gt; _HeightMap; // Heightmap
</font></font></pre>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next is the three-dimensionalization of the Laplacian function. </font><font style="vertical-align: inherit;">It has been changed to refer to a total of 27 squares of 3x3x3. </font><font style="vertical-align: inherit;">By the way, the degree of influence of laplacePower is a value that was somehow calculated.</font></font></p>
<div class="emlist-code">
<p class="caption">ReactionDiffusion3D.compute</p>
<pre class="emlist"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Surrounding index calculation table referenced by the Laplacian function</font></font><font></font>
static const int3 laplaceIndex[27] = {<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, -1, -1), int3 (0, -1, -1), int3 (1, -1, -1),</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, 0, -1), int3 (0, 0, -1), int3 (1, 0, -1),</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, 1, -1), int3 (0, 1, -1), int3 (1, 1, -1),</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, -1, 0), int3 (0, -1, 0), int3 (1, -1, 0),</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, 0, 0), int3 (0, 0, 0), int3 (1, 0, 0),</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, 1, 0), int3 (0, 1, 0), int3 (1, 1, 0),</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, -1, 1), int3 (0, -1, 1), int3 (1, -1, 1),</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, 0, 1), int3 (0, 0, 1), int3 (1, 0, 1),</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  int3 (-1, 1, 1), int3 (0, 1, 1), int3 (1, 1, 1),</font></font></font></font><font></font>
};<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Impact of the grid around the Laplacian</font></font><font></font>
static const float laplacePower[27] = {<font></font>
  0.02, 0.02, 0.02,<font></font>
  0.02, 0.1,  0.02,<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0.02, 0.02, 0.02,</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0.02, 0.1,  0.02,</font></font></font></font><font></font>
  0.1, -1.0,  0.1,<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0.02, 0.1,  0.02,</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0.02, 0.02, 0.02,</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  0.02, 0.1,  0.02,</font></font></font></font><font></font>
  0.02, 0.02, 0.02<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
};</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Buffer index calculation</font></font><font></font>
int GetIndex(int x, int y, int z) {<font></font>
  x = (x &lt; 0) ? x + _TexWidth : x;<font></font>
  x = (x &gt;= _TexWidth) ? x - _TexWidth : x;<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  y = (y &lt;0)? </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y + _TexHeight: y;</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  y = (y&gt; = _TexHeight)? </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y - _TexHeight: y;</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  z = (z &lt;0)? </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z + _TexDepth: z;</font></font></font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  z = (z&gt; = _TexDepth)? </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z - _TexDepth: z;</font></font></font></font><font></font>
<font></font>
  return z * _TexWidth * _TexHeight + y * _TexWidth + x;<font></font>
}<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Laplacian function of U</font></font><font></font>
float LaplaceU(int x, int y, int z) {<font></font>
  float sumU = 0;<font></font>
<font></font>
  for (int i = 0; i &lt; 27; i++) {<font></font>
    int3 pos = laplaceIndex[i];<font></font>
<font></font>
    int idx = GetIndex(x + pos.x, y + pos.y, z + pos.z);<font></font>
    sumU += _BufferRead[idx].u * laplacePower[i];<font></font>
  }<font></font>
  return sumU;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Laplacian function of V</font></font><font></font>
float LaplaceV(int x, int y, int z) {<font></font>
  float sumV = 0;<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  for (int i = 0; i &lt; 27; i++) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    int3 pos = laplaceIndex[i];</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    int idx = GetIndex(x + pos.x, y + pos.y, z + pos.z);</font></font><font></font>
    sumV += _BufferRead[idx].v * laplacePower[i];<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }</font></font></font></font><font></font>
  return sumV;<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></font></font><font></font>
</pre>
</div>

<h3><a id="h5-6-3"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6.3　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Drawing process</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the Render Texture of the simulation result is a 3D volume texture, even if you paste the texture on the Unlit Shader or Surface Shader as before, it will not be displayed normally. </font><font style="vertical-align: inherit;">In the sample, polygons are generated and drawn using a method called the Marching cubes method, but due to space limitations, the explanation of implementation will be omitted. </font><font style="vertical-align: inherit;">For an explanation of the Marching Cubes method, please refer to "Chapter 7 Introduction to the Marching Cubes Method in an Atmosphere" in Unity Graphics Programming Vol.1. </font><font style="vertical-align: inherit;">Another method is to draw with volume rendering using ray marching. </font><font style="vertical-align: inherit;">A very easy-to-understand implementation </font></font><a id="fnb-kw_hecomi" href="https://freder.io/files/unity3/kaiware007.html#fn-kw_hecomi" class="noteref" epub:type="noteref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is introduced on </font><font style="vertical-align: inherit;">Mr. Utsu's blog, </font><font style="vertical-align: inherit;">so please refer to it.</font></font></p>
<div class="footnote" epub:type="footnote" id="fn-kw_hecomi"><p class="footnote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[* 1] Dent Tips http://tips.hecomi.com/entry/2018/01/05/192332</font></font></p></div>
<div id="id_kaiware_2Frd3d" class="image">
<img src="./Chapter 5 _ Reaction Diffusion_files/rd3d.png" alt="3D version Reaction Diffusion">
<p class="caption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure 5.12: 3D Reaction Diffusion
</font></font></p>
</div>

<h2><a id="h5-7"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Summary</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I introduced how to make a creature-like pattern using the Gray-Scott model. </font><font style="vertical-align: inherit;">You can create a completely different pattern by just changing the parameters of Feed and Kill, so be careful as the time will pass quickly if you get absorbed in it (* There are individual differences) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also, for works using Reaction Diffusion , Nakama Kouhei's "DIFFUSION" </font></font><a id="fnb-kw_diffusion" href="https://freder.io/files/unity3/kaiware007.html#fn-kw_diffusion" class="noteref" epub:type="noteref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and Kitahara Nobutaka's "Reaction-Diffusion" </font></font><a id="fnb-kw_reaction_diffusion" href="https://freder.io/files/unity3/kaiware007.html#fn-kw_reaction_diffusion" class="noteref" epub:type="noteref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Would you like to be obsessed with the mysterious charm of Reaction Diffusion?</font></font></p>
<div class="footnote" epub:type="footnote" id="fn-kw_diffusion"><p class="footnote">[*2] DIFFUSION https://vimeo.com/145251635</p></div>
<div class="footnote" epub:type="footnote" id="fn-kw_reaction_diffusion"><p class="footnote">[*3] Reaction-Diffusion https://vimeo.com/176261480</p></div>

<h2><a id="h5-8"></a><span class="secno"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.8　</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reference</font></font></h2>
<ul>
<li>Reaction-Diffusion Tutorial http://www.karlsims.com/rd.html</li>
<li>Reaction diffusion system（Gray-Scott model） <br>https://pmneila.github.io/jsexp/grayscott/</li>
</ul></body></html>